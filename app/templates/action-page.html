<style>
    /* Minimal full-viewport video + overlay */
    .action-video-wrap {
        position: fixed;
        inset: 0;
        z-index: 0;
        overflow: hidden;
        background: #000;
    }

    .action-video-wrap video {
        width: 100%;
        height: 100vh;
        object-fit: cover;
        display: block;
    }

    .action-overlay {
        position: fixed;
        inset: 0;
        z-index: 9999;
        /* raised so overlay is always on top */
        display: flex;
        align-items: center;
        justify-content: center;
        pointer-events: none;
    }

    .action-overlay__card {
        pointer-events: auto;
        background: rgba(0, 0, 0, 0.6);
        color: #fff;
        padding: 14px 18px;
        border-radius: 10px;
        backdrop-filter: blur(4px);
        font-size: 1rem;
        display: flex;
        gap: 10px;
        align-items: center;
    }

    /* animated click-hand */
    .click-hand {
        display: inline-flex;
        align-items: center;
        justify-content: center;
        width: 56px;
        height: 56px;
        border-radius: 12px;
        background: rgba(96, 165, 250, 0.12);
        color: #60a5fa;
        transform-origin: center;
        animation: hand-bounce 1.2s ease-in-out infinite;
    }

    .click-hand i,
    .click-hand svg {
        width: 22px;
        height: 22px;
    }

    .click-hand svg {
        fill: #60a5fa;
    }

    @keyframes hand-bounce {
        0% {
            transform: translateY(0) scale(1);
            opacity: 1
        }

        50% {
            transform: translateY(8px) scale(0.98);
            opacity: 0.95
        }

        100% {
            transform: translateY(0) scale(1);
            opacity: 1
        }
    }

    @media (max-width:640px) {
        .action-overlay__card {
            font-size: 0.95rem;
            padding: 12px 14px;
        }

        .click-hand {
            width: 46px;
            height: 46px;
        }

        .click-hand i,
        .click-hand svg {
            width: 18px;
            height: 18px;
        }
    }
</style>


<div class="action-video-wrap" id="actionVideoWrap">
    <video id="actionBgVideo" preload="metadata" playsinline muted>
        <source
            src="{{ url_for('static', filename='videos/main-video.mp4') }}{% if video_version %}?v={{ video_version }}{% endif %}"
            type="video/mp4" />
        Your browser does not support the video tag.
    </video>
</div>

<div class="action-overlay" id="actionOverlay">
    <div class="action-overlay__card" id="overlayCard">
        <span class="click-hand" aria-hidden="true">
            <!-- Inline SVG fallback hand icon (shows even if Font Awesome isn't loaded) -->
            <svg viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false">
                <path
                    d="M9 2a1 1 0 0 1 1 1v6h1.5a1.5 1.5 0 0 1 1.45 1.03L13.9 12l.6 2.4A3 3 0 0 0 18 17h-3.5l-1.3 3.9A1 1 0 0 1 12.3 22H11a1 1 0 0 1-.95-.68L8 15H7a2 2 0 0 1-2-2V6a4 4 0 0 1 4-4z" />
            </svg>
        </span>
        <div>Click anywhere on this page to return to the homepage.</div>
    </div>
</div>

<script>
    (function () {
        const video = document.getElementById('actionBgVideo');
        const overlay = document.getElementById('actionOverlay');
        let started = false;

        function startPlayback() {
            if (started) return; started = true;
            try { video.muted = false; const p = video.play(); if (p && p.catch) p.catch(() => { }); } catch (e) { /* ignore */ }
            overlay.style.transition = 'opacity .5s ease'; overlay.style.opacity = '0'; setTimeout(() => overlay.remove(), 600);
        }

        // Click anywhere to play (don't block clicks on devtools or inputs)
        document.addEventListener('click', function (e) { startPlayback(); }, { once: false });
        document.addEventListener('keydown', function (e) { if (e.code === 'Space' || e.code === 'Enter') startPlayback(); });

        // Hide native controls (keep UI minimal)
        try { video.controls = false; } catch (e) { }

        // when video ends, redirect to home
        video.addEventListener('ended', function () {
            try { window.location.href = '{{ url_for("main.home") }}'; } catch (e) { window.location.href = '/'; }
        });
    })();
</script>